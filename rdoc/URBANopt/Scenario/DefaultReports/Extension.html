<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class URBANopt::Scenario::DefaultReports::Extension - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
  var index_rel_prefix = "../../../";
</script>

<script src="../../../js/navigation.js" defer></script>
<script src="../../../js/search.js" defer></script>
<script src="../../../js/search_index.js" defer></script>
<script src="../../../js/searcher.js" defer></script>
<script src="../../../js/darkfish.js" defer></script>

<link href="../../../css/fonts.css" rel="stylesheet">
<link href="../../../css/rdoc.css" rel="stylesheet">
<link href="../../../custom_rdoc_styles.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">OpenStudio::Extension::Extension
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-doc_templates_dir">#doc_templates_dir</a>
    
    <li ><a href="#method-i-files_dir">#files_dir</a>
    
    <li ><a href="#method-i-measures_dir">#measures_dir</a>
    
    <li ><a href="#method-i-schema">#schema</a>
    
    <li ><a href="#method-i-schema_file">#schema_file</a>
    
    <li ><a href="#method-i-schema_valid-3F">#schema_valid?</a>
    
    <li ><a href="#method-i-schema_validation_errors">#schema_validation_errors</a>
    
    <li ><a href="#method-i-validate">#validate</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-URBANopt::Scenario::DefaultReports::Extension">
  <h1 id="class-URBANopt::Scenario::DefaultReports::Extension" class="class">
    class URBANopt::Scenario::DefaultReports::Extension
  </h1>

  <section class="description">
    
  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Override parent class (OpenStudio::Extension::Extension)</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/urbanopt/scenario/default_reports/extension.rb, line 41</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>
  <span class="ruby-keyword">super</span>

  <span class="ruby-ivar">@root_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">absolute_path</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>), <span class="ruby-string">&#39;..&#39;</span>, <span class="ruby-string">&#39;..&#39;</span>, <span class="ruby-string">&#39;..&#39;</span>, <span class="ruby-string">&#39;..&#39;</span>))

  <span class="ruby-ivar">@instance_lock</span> = <span class="ruby-constant">Mutex</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">@@schema</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">schema</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-doc_templates_dir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">doc_templates_dir</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Doc templates are common files like copyright files which are used to update measures and other code Doc templates will only be applied to measures in the current repository Return the absolute path of the doc templates dir or nil if there is none</p>
          
          

          
          <div class="method-source-code" id="doc_templates_dir-source">
            <pre><span class="ruby-comment"># File lib/urbanopt/scenario/default_reports/extension.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">doc_templates_dir</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">absolute_path</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@root_dir</span>, <span class="ruby-string">&#39;doc_templates&#39;</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-files_dir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">files_dir</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Relevant files such as weather data, design days, etc. Return the absolute path of the files or nil if there is none, used when configuring OSWs</p>
          
          

          
          <div class="method-source-code" id="files_dir-source">
            <pre><span class="ruby-comment"># File lib/urbanopt/scenario/default_reports/extension.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">files_dir</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">absolute_path</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@root_dir</span>, <span class="ruby-string">&#39;lib/urbanopt/scenario/default_reports/&#39;</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-measures_dir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">measures_dir</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the absolute path of the measures or nil if there is none, can be used when configuring OSWs.</p>
          
          

          
          <div class="method-source-code" id="measures_dir-source">
            <pre><span class="ruby-comment"># File lib/urbanopt/scenario/default_reports/extension.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">measures_dir</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">absolute_path</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@root_dir</span>, <span class="ruby-string">&#39;lib/measures/&#39;</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-schema" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">schema</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>return schema</p>
          
          

          
          <div class="method-source-code" id="schema-source">
            <pre><span class="ruby-comment"># File lib/urbanopt/scenario/default_reports/extension.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema</span>
  <span class="ruby-ivar">@instance_lock</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">@@schema</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">schema_file</span>, <span class="ruby-string">&#39;r&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">@@schema</span> = <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">f</span>.<span class="ruby-identifier">read</span>, <span class="ruby-value">symbolize_names:</span> <span class="ruby-keyword">true</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">@@schema</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-schema_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">schema_file</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>return path to schema file</p>
          
          

          
          <div class="method-source-code" id="schema_file-source">
            <pre><span class="ruby-comment"># File lib/urbanopt/scenario/default_reports/extension.rb, line 69</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema_file</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">files_dir</span>, <span class="ruby-string">&#39;schema/scenario_schema.json&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-schema_valid-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">schema_valid?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>check if the schema is valid</p>
          
          

          
          <div class="method-source-code" id="schema_valid-3F-source">
            <pre><span class="ruby-comment"># File lib/urbanopt/scenario/default_reports/extension.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema_valid?</span>
  <span class="ruby-identifier">metaschema</span> = <span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">Validator</span>.<span class="ruby-identifier">validator_for_name</span>(<span class="ruby-string">&#39;draft6&#39;</span>).<span class="ruby-identifier">metaschema</span>
  <span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">Validator</span>.<span class="ruby-identifier">validate</span>(<span class="ruby-identifier">metaschema</span>, <span class="ruby-identifier">@@schema</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-schema_validation_errors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">schema_validation_errors</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>return detailed schema validation errors</p>
          
          

          
          <div class="method-source-code" id="schema_validation_errors-source">
            <pre><span class="ruby-comment"># File lib/urbanopt/scenario/default_reports/extension.rb, line 104</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema_validation_errors</span>
  <span class="ruby-identifier">metaschema</span> = <span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">Validator</span>.<span class="ruby-identifier">validator_for_name</span>(<span class="ruby-string">&#39;draft6&#39;</span>).<span class="ruby-identifier">metaschema</span>
  <span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">Validator</span>.<span class="ruby-identifier">fully_validate</span>(<span class="ruby-identifier">metaschema</span>, <span class="ruby-identifier">@@schema</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-validate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validate</span><span
            class="method-args">(schema, data)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>validate data against schema</p>

<p>[parameters:] <code>schema</code> - <em>Hash</em> - A hash of the JSON scenario_schema. <code>data</code> - <em>Hash</em> - A hash of the data to be validated against scenario_schema.</p>
          
          

          
          <div class="method-source-code" id="validate-source">
            <pre><span class="ruby-comment"># File lib/urbanopt/scenario/default_reports/extension.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">validate</span>(<span class="ruby-identifier">schema</span>, <span class="ruby-identifier">data</span>)
  <span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">Validator</span>.<span class="ruby-identifier">fully_validate</span>(<span class="ruby-identifier">schema</span>, <span class="ruby-identifier">data</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

